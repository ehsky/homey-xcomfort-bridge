# Homey xComfort Bridge App

This Homey app integrates xComfort Bridge devices with Homey Pro, supporting multiple drivers for bridge, dimming actuator, and room control. It is based on the Homey Apps SDK v3 and follows best practices for device persistence and Flow automation reliability.

## Project Structure
- `/drivers/xcomfort-bridge/` - Driver for the xComfort Bridge
- `/drivers/xcomfort-dimming-actuator/` - Driver for dimming actuators
- `/drivers/xcomfort-room/` - Driver for room-level control
- `/lib/XComfortConnection.js` - Shared connection logic to xComfort Bridge
- `app.js` - Main app coordinator
- `package.json` - Node.js dependencies and app metadata

## Setup Instructions
1. Install Homey CLI: `npm install -g homey`
2. Install dependencies: `npm install`
3. Run the app locally: `homey app run`
4. Pair devices via Homey app UI

## Development Notes
- Device drivers use xComfort terminology: bridge, dimming actuator, room
- Device capabilities: `onoff`, `dim`
- Device classes: `light`, `other`
- Devices remain available in Homey Flows even if the bridge is offline
- Follows SDK v3 best practices for pairing, device management, and Flow cards

## Acknowledgments

This project was greatly inspired by and built upon the work from [jankrib/xcomfort-python](https://github.com/jankrib/xcomfort-python), which provided essential insights into the xComfort Bridge WebSocket protocol implementation, including:

- Authentication flow and message encryption
- Proper ACK (acknowledgment) handling for message counter fields
- Device state management and message type definitions
- Connection stability and protocol timing

Special thanks to [@jankrib](https://github.com/jankrib) for the comprehensive Python implementation that served as a reference for understanding the xComfort Bridge communication protocol.

## References

- [Homey Apps SDK Documentation](https://apps.developer.homey.app/)
- [xComfort Python Library](https://github.com/jankrib/xcomfort-python) - Protocol reference implementation
- [Roborock Homey App Example](https://gitlab.com/functor-solutions/homey/roborock)

---
Generated by GitHub Copilot
